<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Min Project</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">

    <style>
        .bs-example {
            margin: 20px;
        }

        h1 {
            margin-top: 4%;
        }

        #start {
            margin-top: 100%;
            margin-left: 55%;
        }

        #discription {
            margin-top: 6%;
            margin-left: 5%;
            font-size: 30px;
            font-family: 'Ubuntu', sans-serif;
        }
    </style>

</head>


<body>
    <center>
        <h1>Question Ansering System</h1>
    </center>
    <div class="row">
        <div class="col-sm-8">
            <div id="discription">
                Lorem ipsum dolor sit amet consectetur adipisicing elit.
                Maxime mollitia,molestiae quas vel sint commodi repudiandae consequuntur voluptatum laborum
                Maxime mollitia,molestiae quas vel sint commodi repudiandae consequuntur voluptatum laborum
            </div>
        </div>
        <div class="col-sm-2">
            <button class="btn btn-primary btn-lg" id="start">Start</button>
        </div>
        <br>
        <br>
        <div class="bs-example">

            <form action="{{ url_for('predict')}}" method="post">

                Story:
                <br>
                <div class="row">
                    <div class="col-sm-8">
                        <select name="story" id="story" class="form-select" aria-label="Default select example">
                            <option selected>Select a Story.</option>
                            <option value="John travelled to the hallway.Mary journeyed to the bathroom.">
                                John travelled to the hallway.Mary journeyed to the bathroom.
                            </option>
                            <option value="John went to the hallway.Sandra journeyed to the kitchen.">
                                John went to the hallway.Sandra journeyed to the kitchen.
                            </option>
                            <option value="Sandra travelled to the hallway.John went to the garden.">
                                Sandra travelled to the hallway.John went to the garden.
                            </option>
                        </select>
                    </div>
                </div>
                <br>

                Question:
                <br>
                <div class="row">
                    <div class="col-sm-8">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <button onClick="questions()" class="btn btn-outline-secondary dropdown-toggle"
                                    type="button" data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false">Choose a
                                    Question</button>
                                <div class="dropdown-menu" id="question_list">

                                </div>
                            </div>
                            <input name="question" type="text" id="val" class="form-control"
                                placeholder="or type a question...">
                            <button class="btn btn-outline-secondary" type="submit">Predict</button>
                        </div>
                    </div>
                </div>

                <br>
                Answer:
                <br>
                <textarea id="w3review" name="w3review" rows="10" cols="80">{{ prediction_text }}</textarea>
                <br>
                <br>

                <center>
                    <button type="button" class="btn btn-primary btn-rounded">Ask New Question</button>
                </center>
            </form>
        </div>


        <script>
            function questions() {
                let selected_story = document.getElementById("story").value
                let question_list = document.getElementById("question_list")
                while (question_list.firstChild) {
                    question_list.removeChild(question_list.firstChild);
                }
                var tag;
                var att;
                var optionHtml;

                if (selected_story == "John travelled to the hallway.Mary journeyed to the bathroom.") {
                    tag = document.createElement("div");
                    att = document.createAttribute("class");
                    att.value = "dropdown-item"
                    tag.setAttributeNode(att)
                    att = document.createAttribute("onClick");
                    att.value = "fun('Where is John')"
                    tag.setAttributeNode(att)

                    optionHtml = document.createTextNode("Where is John")
                    tag.appendChild(optionHtml)

                    question_list.appendChild(tag);

                    //second Option 
                    tag = document.createElement("div");
                    att = document.createAttribute("class");
                    att.value = "dropdown-item"
                    tag.setAttributeNode(att)
                    att = document.createAttribute("onClick");
                    att.value = "fun('Where is Mary')"
                    tag.setAttributeNode(att)

                    optionHtml = document.createTextNode("Where is Mary")
                    tag.appendChild(optionHtml)

                    question_list.appendChild(tag);
                }

                if (selected_story == "John went to the hallway.Sandra journeyed to the kitchen.") {
                    tag = document.createElement("div");
                    att = document.createAttribute("class");
                    att.value = "dropdown-item"
                    tag.setAttributeNode(att)
                    att = document.createAttribute("onClick");
                    att.value = "fun('Where is Sandra')"
                    tag.setAttributeNode(att)

                    optionHtml = document.createTextNode("Where is Sandra")
                    tag.appendChild(optionHtml)

                    question_list.appendChild(tag);

                    //second Option 
                    tag = document.createElement("div");
                    att = document.createAttribute("class");
                    att.value = "dropdown-item"
                    tag.setAttributeNode(att)
                    att = document.createAttribute("onClick");
                    att.value = "fun('Where is John')"
                    tag.setAttributeNode(att)

                    optionHtml = document.createTextNode("Where is John")
                    tag.appendChild(optionHtml)

                    question_list.appendChild(tag);
                }

                if (selected_story == "Sandra travelled to the hallway.John went to the garden.") {
                    tag = document.createElement("div");
                    att = document.createAttribute("class");
                    att.value = "dropdown-item"
                    tag.setAttributeNode(att)
                    att = document.createAttribute("onClick");
                    att.value = "fun('Where is Sandra')"
                    tag.setAttributeNode(att)

                    optionHtml = document.createTextNode("Where is Sandra")
                    tag.appendChild(optionHtml)

                    question_list.appendChild(tag);

                    //second Option 
                    tag = document.createElement("div");
                    att = document.createAttribute("class");
                    att.value = "dropdown-item"
                    tag.setAttributeNode(att)
                    att = document.createAttribute("onClick");
                    att.value = "fun('Where is John')"
                    tag.setAttributeNode(att)

                    optionHtml = document.createTextNode("Where is John")
                    tag.appendChild(optionHtml)

                    question_list.appendChild(tag);
                }


            }


            var e = document.querySelectorAll('option')
            e.forEach(x => {
                if (x.textContent.length > 200)
                    x.textContent = x.textContent.substring(0, 200) + '...';
            })
            var story;

            function fun(value) {
                document.querySelector('#val').value = value;
                story = value;
            }
        </script>

        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous">
        </script>

</body>

</html>